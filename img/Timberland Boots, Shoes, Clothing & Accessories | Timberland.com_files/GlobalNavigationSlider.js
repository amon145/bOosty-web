define(["jquery","wcs.global-events","foundation.core","foundation.topbar","jquery-mobile-events","jquery-carousel","wcs.topbar-carousel"],function(a,b){return{init:function(){function b(b){b.siblings(".has-dropdown-js").each(function(){a(this).data("is-dropdown-shown")&&(a(this).find(".dropdown, .dropdown-arrow").hide(0),a(this).data("is-dropdown-shown",!1),M--)}),b.data("is-dropdown-shown")||(b.find(".dropdown, .dropdown-arrow").show(0),b.data("is-dropdown-shown",!0),M++),e(b)}function c(a){a.data("is-dropdown-shown")&&(a.find(".dropdown, .dropdown-arrow").hide(0),a.data("is-dropdown-shown",!1),M--)}function d(){a(".dropdown, .dropdown-arrow",".has-dropdown-js").css("display","")}function e(b){b.find("img.lazy").each(function(){var b=a(this);b.attr("src",b.data("original"))})}function f(){var f=a(".top-bar"),h=f.find(".lower");J=h.outerHeight(),K=g(),p()>VIEWPORTS.BREAKPOINTS.MOBILE.MAX?(i(),j(),x()):D(),y(),WCS_CONFIG.get("topnav::upperNavUnderDropdown")===!0&&f.find(".upper").insertAfter(".lower-container-js"),h.find("> .has-dropdown-js > a").on("touchstart",function(b){p()>=VIEWPORTS.BREAKPOINTS.TABLET.MIN&&($this=a(this).parent(),$expanded=f.find(".lower > .expanded"),f.hasClass("tappable")?$this.hasClass("expanded")?($expanded.removeClass("expanded"),o(),n($this.parent())):($expanded.removeClass("expanded"),o(),$this.addClass("expanded"),k($this),m($this.parent()),WCS_CONFIG.get("topnav::dropdownStackedList")===!0&&C($this.find(".sub-cat-lists-js > li"),".stacked-list-js","max")):(f.addClass("tappable"),$this.addClass("expanded"),k($this),m($this.parent()),WCS_CONFIG.get("topnav::dropdownStackedList")===!0&&C($this.find(".sub-cat-lists-js > li"),".stacked-list-js","max")))}),h.find("> .has-dropdown-js > a").one("touchstart",function(b){p()>=VIEWPORTS.BREAKPOINTS.TABLET.MIN&&e(a(this).parent().find(".dropdown"))}),h.find(".has-dropdown-js > a").on("click",function(b){(f.hasClass("tappable")||p()<=VIEWPORTS.BREAKPOINTS.MOBILE.MAX)&&(b.preventDefault(),WCS_CONFIG.get("topnav::mobileScrollToTop")&&a(window).scrollTop(0))}),h.find("> .has-dropdown-js").on("mouseenter",function(c){if(p()>=VIEWPORTS.BREAKPOINTS.DESKTOP.MIN&&!f.hasClass("tappable")){var d=null;d=a(c.target).hasClass("has-dropdown-js")?a(c.target):a(c.target).parents(".has-dropdown-js");var e=d.children(".dropdown, .dropdown-arrow");p()>=VIEWPORTS.BREAKPOINTS.TABLET.MIN&&(m(a(this)),WCS_CONFIG.get("topnav::dropdownStackedList")===!0&&d.find("ul.dropdown").hasClass("stacked")&&C(a(this).find(".sub-cat-lists-js > li"),".stacked-list-js","max")),d.data("is-mouse-hover",!0),d.data("is-dropdown-shown")||(e.hide(0),d.data("is-dropdown-shown",!1),setTimeout(function(){d.data("is-mouse-hover")&&b(d)},L-100))}}),h.find("> .has-dropdown-js").on("mouseleave",function(b){if(p()>=VIEWPORTS.BREAKPOINTS.DESKTOP.MIN){var d=null;d=a(b.target).hasClass("has-dropdown-js")?a(b.target):a(b.target).parents(".has-dropdown-js");var e=d.children(".dropdown, .dropdown-arrow");d.data("is-mouse-hover",!1),d.data("is-dropdown-shown")&&(e.show(0),d.data("is-dropdown-shown",!0),setTimeout(function(){d.data("is-mouse-hover")||c(d)},L+100))}n(a(this))}),h.find("> .has-dropdown-custom-js").on("mouseenter",function(b){p()>=VIEWPORTS.BREAKPOINTS.TABLET.MIN&&(m(a(this)),WCS_CONFIG.get("topnav::navHeaderIncludeDropdownsInMore")===!0&&(C(a(".gnav-more .more-link-js"),null,"max"),a(".more-links-container-js .more-link-js").first().css("border-left","none"),a(".more-links-container-js .sub-category").first().css("padding-left","0")))}),h.find("> .has-dropdown-custom-js").on("mouseleave",function(b){p()>=VIEWPORTS.BREAKPOINTS.TABLET.MIN&&(m(a(this)),WCS_CONFIG.get("topnav::navHeaderIncludeDropdownsInMore")===!0&&C(a(".gnav-more .more-link-js"),null,"inherit"))}),h.find("a.sub-category-header").on("click",function(b){p()>=VIEWPORTS.BREAKPOINTS.TABLET.MIN&&($this=a(b.target),void 0!=$this.attr("href")&&(window.location.href=$this.attr("href")))}),a("> .has-dropdown-js > .dropdown.stacked > .title.back",h).on("click",function(){E(a(this),"modify")}),a("> .has-dropdown-js .has-dropdown-js > .dropdown > .title.back",h).on("click",function(){E(a(this),"reset")}),f.find(".back").on("click",function(a){a.preventDefault()}),f.find(".lower > .has-dropdown .has-dropdown > a").on("click",function(b){setTimeout(function(){var b=a("body").scrollTop();a("body").scrollTop(b+1)},200),setTimeout(function(){var b=a("body").scrollTop();a("body").scrollTop(b-1)},201)}),f.find(".title-area .search-topbar-js").on("click",function(){a(".top-bar").hasClass("expanded")&&a(".top-bar .title-area .toggle-topbar-js").trigger("click"),a("form.search-form-js .topbar-search-form-js").toggle(),a("input#search").focus()}),f.find(".title-area .toggle-topbar-js").on("click",function(){a("form.search-form-js .topbar-search-form-js").hide()}),a("form.search-form-js .search-button").on("click",function(b){var c=a("input#search"),d=c.attr("data-filter-chars"),e=new RegExp(d,"gi");d&&c.val(c.val().replace(e," ")),b.preventDefault(),p()<=VIEWPORTS.BREAKPOINTS.TABLET.MAX?(a("form.search-form-js .topbar-search-form-js").toggle(),a("input#search").focus()):a(".search-form-js").submit()}),a("form.search-form-js .search-button-mobile-js").on("click",function(b){b.preventDefault(),a(".search-form-js").submit()}),a(window).resize(function(){D("reset");var b=1,c=I()?VIEWPORTS.BREAKPOINTS.TABLET.MAX+b+K:VIEWPORTS.BREAKPOINTS.TABLET.MAX+b;if(p()>VIEWPORTS.BREAKPOINTS.MOBILE.MAX||H){if(u(),J=a(".top-bar .lower").outerHeight(),i(),j(),x(),y(),WCS_CONFIG.get("topnav::navHeaderExcludeMore")===!0){var e=a(".more-links-container-js");e.find(".more-link-js").length&&q(e)}!H&&p()>c&&a("form.search-form-js .topbar-search-form-js").show()}else H||(a(".contain-to-grid-js").removeClass("menu-showing"),l(),z(),w());d()})}function g(){if(K>0)return K;var b=a('<div style="width: 50px; height: 50px; overflow: auto; position: absolute; top: -200px; left: -200px;"><div></div></div>').appendTo("body"),c=b.children().first();return K=a(c).innerWidth()-a(c).height(100).innerWidth(),a(b).remove(),K}function h(b){var c,d;c=WCS_CONFIG.get("topnav::navHeaderIncludeDropdownsInMore")===!0?".dropdown:not(.mini-list)":".dropdown",d=H===!0&&p()<=VIEWPORTS.BREAKPOINTS.MOBILE.MAX?a(".page-contents").outerWidth():a("body").outerWidth(),b.children(c).addClass("dropdown-custom-style").find(".has-dropdown-js").addClass("mega").end().find(".has-dropdown-js").removeClass("has-dropdown-js").end().find(".dropdown").addClass("mega2").end().find(".dropdown").removeClass("dropdown"),b.hasClass("has-dropdown-custom-js")||b.children(c).css({width:d+"px",left:-b.offset().left+"px",top:J+"px"}),a(".moved").removeClass("moved")}function i(){var b=a(".top-bar .lower").find("> .has-dropdown-js:not(.gnav-more)");b.each(function(){h(a(this))})}function j(){var b=a(".gnav-more");if(!(b.length<1)){var c=b.find(".more-links-container-js");if(!(c.length<1)){var d=b[0].getBoundingClientRect().right,e=c.outerWidth();e>d?c.css("right",d-e+"px"):c.css("right","")}}}function k(a){var b=a.children(".dropdown-arrow");b.show()}function l(){var b=a(".lower > .has-dropdown-js").children(".dropdown");b.find(".mega").addClass("has-dropdown-js"),b.find(".mega").removeClass("mega"),b.find(".mega2").addClass("dropdown"),b.find(".mega2").removeClass("mega2"),b.removeClass("dropdown-custom-style"),b.css("cssText","")}function m(b){a(".contain-to-grid-js").addClass("menu-showing"),b.addClass("menu-showing"),b.find("ul.dropdown").addClass("dropdown-showing")}function n(b){a(".contain-to-grid-js").removeClass("menu-showing"),b.removeClass("menu-showing"),b.find("ul.dropdown").removeClass("dropdown-showing")}function o(){var b=a(".lower > .has-dropdown-js, .lower > .has-dropdown-custom-js").find(".dropdown-arrow");b.hide()}function p(){return a(window).height()<a("body").height()?a(window).innerWidth()+K:a(window).innerWidth()}function q(b){var c=0,d=b.find(".more-link-js"),e=2*parseInt(b.css("padding"));d.each(function(){var b=a(this),d=parseInt(b.find(".sub-category").css("min-width"));thisContentWidth=b.find(".sub-category").outerWidth(),d>thisContentWidth&&(thisContentWidth=d),b.css("width",thisContentWidth),c+=thisContentWidth}),c+=e,b.css("width",c)}function r(){if(WCS_CONFIG.get("topnav::navHeaderExcludeMore")===!0){var b=a(".more-links-container-js");b.find(".more-link-js").length?(b.parents(".has-dropdown-custom-js").show(),q(b)):b.parents(".has-dropdown-custom-js").hide()}}function s(b){var c=!1,d=b.text();a(".more-links-container-js .more-link-js").filter(function(){a(this).text()===d&&(c=!0,a(this).remove())}),r()}function t(b){var c=b.clone(),d=!1,e=b.text();a(".more-links-container-js .more-link-js").filter(function(){a(this).text()===e&&(d=!0)}),d===!1&&p()>VIEWPORTS.BREAKPOINTS.MOBILE.MAX&&c.prependTo(a(".more-links-container-js")),r()}function u(){var b,c,d,e,f=0,g=0,h=30,i=0,j=0,k=a("#master-header"),l=k.find(".search-form-container .topbar-search-form-js"),m=k.find(".lower"),n=m.children(),o=n.not(".more-link-js").eq(-2),q=a(".lower > li:first,.lower > li.has-dropdown-js,.lower > li.has-dropdown-custom-js, .lower > li.no-dropdown-js"),r=n.filter(".more-link-js");v(),d=l.is(":visible")===!0&&WCS_CONFIG.get("topnav::navHeaderExcludeSearch")===!1?G(l):l.parents(".search-form-js").attr("data-exclude-from-top-bar-width")?0:G(k.find(".search-form-container .postfix.search-button")),WCS_CONFIG.get("topnav::navHeaderExcludeMore")===!0&&p()>VIEWPORTS.BREAKPOINTS.DESKTOP.MAX&&(h=5,q=q.not('[data-exclude-from-top-bar-width-on-full="true"]')),WCS_CONFIG.get("topnav::navHeaderLogoSeparateLineTabletEnabled")===!0&&p()<=VIEWPORTS.BREAKPOINTS.TABLET.MAX&&p()>=VIEWPORTS.BREAKPOINTS.TABLET.MIN?(c=0,h=0):c=G(k.find(".title-area")),e=k.find(".top-bar").width()-(c+d+h),e=Math.max(e,k.find(".lower-container-js").width()),q.each(function(b,c){var d=a(c),e=d.get(0),f=o.get(0);d.hasClass("more-link-js")||d.hasClass("gnav-more")||(i+=G(d),e!==f&&(j+=G(d)))}),b=e-j;var u=j;g=G(o),b>=g?(o.removeClass("hidden-nav-item").addClass("visible-nav-item"),b-=g,u+=g):o.removeClass("visible-nav-item").addClass("hidden-nav-item");for(var w=0;w<r.length;w++){var x=r.eq(w);if(f=G(x),!(b>f))break;x.removeClass("hidden-nav-item").addClass("visible-nav-item"),b-=f,u+=f,s(x)}if(w<r.length&&N>b){w--;var x=r.eq(w);f=G(x),b+=f,u-=f}for(;w<r.length;w++){var x=r.eq(w);x.removeClass("visible-nav-item").addClass("hidden-nav-item"),t(x),w==r.length-1&&(N=G(m.find(".gnav-more")),b-=N,u+=N)}a(".top-bar-js .lower-container-js").css("overflow","visible"),m.css({"max-width":e+2,"min-width":i+2,width:u})}function v(){WCS_CONFIG.get("topnav::navHeaderIncludeDropdownsInMore")===!0&&a("#master-header .lower .more-links-container-js").empty()}function w(){var b=a("#master-header"),c=b.find(".lower");c.css({"min-width":"","max-width":"",width:""})}function x(){0===a(".top-bar .lower").find(".ui-carousel-container").size()&&a(".top-bar .lower").find(".header-nav-carousel-js").each(function(){a(this).find("li").length>1&&a(this).carousel({identifier:"ui-carousel-header",bullets:!1,responsive:!1})})}function y(){$topbar=a(".top-bar"),$topbarCarouselWrapper=$topbar.find(".carousel-wrapper-outer-js"),$topbarCarouselWrapper.length>0&&(p()>=VIEWPORTS.BREAKPOINTS.DESKTOP.MIN?($topbar.addClass("carousel"),$topbarCarouselWrapper.initializeCarousel(),$topbar.removeClass("carousel")):$topbarCarouselWrapper.uninstallCarousel())}function z(){a(".carousel-wrapper-outer-js").css("cssText",""),a(".carousel-wrapper-js").css("cssText",""),a(".carousel-slide-js").css("cssText",""),a(".item-js").css("cssText","")}function A(){1==WCS_CONFIG.get("topnav::dropdownBackButtonNoArrow")&&a(".title.back",".has-dropdown-js").each(function(){a(this).html(a(this).html().replace(/\« /g,""))})}function B(){if(WCS_CONFIG.get("topnav::dropdownStackedList")===!0){var b,c,d=a(".cat-menu-js");WCS_CONFIG.get("topnav::dropdownStackedListConfigEnabled")===!0?(b="data-sub-cat-col-row",c="data-sub-cat-col-container"):(b="id",c="data-sub-cat-id"),a(".has-dropdown-js",d).each(function(){var d=a(this),e=d.find(".sub-cat-lists-js");$stackedLists=e.find(".stacked-list-js"),$stackedLists.each(function(){var d=a(this),f=d.attr(b),g=d.clone().children().addClass("stacked-list");e.find("["+c+'="'+f+'"]').append(g)})})}}function C(b,c,d){var e,f,g=[];if(f=null!==c||""!==c?c:null,b.not(f).each(function(){$this=a(this),g.push($this.height())}),"max"==d){var h=Math.max.apply(Math,g);e=h>0?h+"px":e=""}else"inherit"==d&&(e="");b.not(f).each(function(){a(this).height(e)})}function D(b){if(WCS_CONFIG.get("topnav::dropdownAuxLinksEnabled")===!0&&p()<=VIEWPORTS.BREAKPOINTS.MOBILE.MAX){var c=a(".top-bar .lower > .has-dropdown-js:has(.featured-items-list-js)");c.each(function(){var c=a(this),d=c.find(".featured-items-list-js"),e=c.find(" > ul");"reset"===b&&(d.css({top:"",height:""}),c.height("initial"),e.height(""),WCS_CONFIG.get("topnav::dropdownStackedList")===!0&&c.find(".sub-cat-lists-js").css("height",""));var f=c.height(),g=e.outerHeight(!0),h=c.find(".featured-items ul li",d).length,i=f*h,j=g+i,k=e.find("> .title").outerHeight();WCS_CONFIG.get("topnav::dropdownStackedList")===!0&&(c.find(".sub-cat-lists-js").height(j-k),c.addClass("aux-height-modified")),e.height(j),d.css("top",g).height(i)})}else WCS_CONFIG.get("topnav::dropdownAuxLinksEnabled")===!0&&p()>=VIEWPORTS.BREAKPOINTS.MOBILE.MAX&&a(".featured-items-list-js","#master-header .top-bar").css("top","")}function E(a,b){var c,d=a,e=d.parents(".lower > .has-dropdown-js");if("modify"===b?c=!e.hasClass("aux-height-modified"):"reset"===b&&(c=e.hasClass("aux-height-modified")),WCS_CONFIG.get("topnav::dropdownAuxLinksEnabled")===!0&&WCS_CONFIG.get("topnav::dropdownStackedList")===!0&&c){"reset"===b&&D("reset");var f=e.find(".sub-cat-lists-js"),g=f.find(".sub-category-header").outerHeight(),h=f.height();"modify"===b?(f.height(h-g),e.addClass("aux-height-modified")):"reset"===b&&(f.height(h+g),e.removeClass("aux-height-modified"))}}function F(){a("#master-header .cat-menu-js").on("click",function(b){var c=a(this);return c.hasClass("js-state-processing")?(b.preventDefault(),void b.stopImmediatePropagation()):(c.addClass("js-state-processing"),void setTimeout(function(){c.removeClass("js-state-processing")},600))})}function G(a){if(!a||a.length<1)return 0;var b=a[0].getBoundingClientRect();return b.width>0?Math.ceil(b.width):Math.round(b.right-b.left,0)+1}var H=a("html").hasClass("lt-ie8"),I=function(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)},J=0,K=0,L=WCS_CONFIG.get("topnav::navHoverDelay"),M=0,N=0,O=a("#master-header .lower .gnav-more");O.show(),N=G(O),O.hide(),a(function(){A(),B(),p()>VIEWPORTS.BREAKPOINTS.MOBILE.MAX?u():w(),f(),F()})}}});
//# sourceMappingURL=GlobalNavigationSlider.js.map