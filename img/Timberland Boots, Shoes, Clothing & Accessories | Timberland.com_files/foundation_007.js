!function(a,b,c,d){"use strict";Foundation.libs.topbar={name:"topbar",version:"4.3.2",settings:{index:0,stickyClass:"sticky",custom_back_text:!0,back_text:"Back",is_hover:!0,mobile_show_parent_link:!1,scrolltop:!0,init:!1},init:function(c,d,e){Foundation.inherit(this,"data_options addCustomRule");var f=this;return"object"==typeof d?a.extend(!0,this.settings,d):"undefined"!=typeof e&&a.extend(!0,this.settings,e),"string"!=typeof d?(a(".top-bar, [data-topbar]").each(function(){a.extend(!0,f.settings,f.data_options(a(this))),f.settings.$w=a(b),f.settings.$topbar=a(this),f.settings.$section=f.settings.$topbar.find("section"),f.settings.$titlebar=f.settings.$topbar.children("ul").first(),f.settings.$topbar.data("index",0);var c=f.settings.$topbar.parent();c.hasClass("fixed")||c.hasClass(f.settings.stickyClass)?(f.settings.$topbar.data("height",f.outerHeight(c)),f.settings.$topbar.data("stickyoffset",c.offset().top)):f.settings.$topbar.data("height",f.outerHeight(f.settings.$topbar));var d=a("<div class='top-bar-js-breakpoint'/>").insertAfter(f.settings.$topbar);f.settings.breakPoint=d.width(),d.remove(),f.assemble(),f.settings.is_hover&&f.settings.$topbar.find(".has-dropdown").addClass("not-click"),f.addCustomRule(".f-topbar-fixed { padding-top: "+f.settings.$topbar.data("height")+"px }"),f.settings.$topbar.parent().hasClass("fixed")&&a("body").addClass("f-topbar-fixed")}),f.settings.init||this.events(),this.settings.init):this[d].call(this,e)},toggle:function(){var c=this,d=a(".top-bar, [data-topbar]"),e=d.find("section, .section");c.breakpoint()&&(c.rtl?(e.css({right:"0%"}),e.find(">.name").css({right:"100%"})):(e.css({left:"0%"}),e.find(">.name").css({left:"100%"})),e.find("li.moved").removeClass("moved"),d.data("index",0),d.toggleClass("expanded").css("height","")),c.settings.scrolltop?d.hasClass("expanded")?d.parent().hasClass("fixed")&&(c.settings.scrolltop?(d.parent().removeClass("fixed"),d.addClass("fixed"),a("body").removeClass("f-topbar-fixed"),b.scrollTo(0,0)):d.parent().removeClass("expanded")):d.hasClass("fixed")&&(d.parent().addClass("fixed"),d.removeClass("fixed"),a("body").addClass("f-topbar-fixed")):(d.parent().hasClass(c.settings.stickyClass)&&d.parent().addClass("fixed"),d.parent().hasClass("fixed")&&(d.hasClass("expanded")?(d.addClass("fixed"),d.parent().addClass("expanded")):(d.removeClass("fixed"),d.parent().removeClass("expanded"),c.updateStickyPositioning())))},timer:null,events:function(){var d=this;a(this.scope).off(".fndtn.topbar").on("click.fndtn.topbar",".top-bar .toggle-topbar, [data-topbar] .toggle-topbar",function(a){a.preventDefault(),d.toggle()}).on("click.fndtn.topbar",".top-bar li.has-dropdown",function(b){var c=a(this),e=a(b.target),f=c.closest("[data-topbar], .top-bar");f.data("topbar");return e.data("revealId")?void d.toggle():void(d.breakpoint()||(!d.settings.is_hover||Modernizr.touch)&&(b.stopImmediatePropagation(),"A"===e[0].nodeName&&e.parent().hasClass("has-dropdown")&&b.preventDefault(),c.hasClass("hover")?(c.removeClass("hover").find("li").removeClass("hover"),c.parents("li.hover").removeClass("hover")):c.addClass("hover")))}).on("click.fndtn.topbar",".top-bar .has-dropdown>a, [data-topbar] .has-dropdown>a",function(c){if(d.breakpoint()&&a(b).width()!=d.settings.breakPoint){c.preventDefault();var e=a(this),f=e.closest(".top-bar, [data-topbar]"),g=f.find("section, .section"),h=(e.next(".dropdown").outerHeight(),e.closest("li"));f.data("index",f.data("index")+1),h.addClass("moved"),d.rtl?(g.css({right:-(100*f.data("index"))+"%"}),g.find(">.name").css({right:100*f.data("index")+"%"})):(g.css({left:-(100*f.data("index"))+"%"}),g.find(">.name").css({left:100*f.data("index")+"%"})),f.css("height",d.outerHeight(e.siblings("ul"),!0)+d.settings.$topbar.data("height"))}}),a(b).on("resize.fndtn.topbar",function(){if("undefined"!=typeof d.settings.$topbar){var b,e=d.settings.$topbar.parent("."+this.settings.stickyClass);if(!d.breakpoint()){var f=d.settings.$topbar.hasClass("expanded");a(".top-bar, [data-topbar]").css("height","").removeClass("expanded").find("li").removeClass("hover"),f&&d.toggle()}e.length>0&&(e.hasClass("fixed")?(e.removeClass("fixed"),b=e.offset().top,a(c.body).hasClass("f-topbar-fixed")&&(b-=d.settings.$topbar.data("height")),d.settings.$topbar.data("stickyoffset",b),e.addClass("fixed")):(b=e.offset().top,d.settings.$topbar.data("stickyoffset",b)))}}.bind(this)),a("body").on("click.fndtn.topbar",function(b){var c=a(b.target).closest("li").closest("li.hover");c.length>0||a(".top-bar li, [data-topbar] li").removeClass("hover")}),a(this.scope).on("click.fndtn",".top-bar .has-dropdown .back, [data-topbar] .has-dropdown .back",function(b){b.preventDefault();var c=a(this),e=c.closest(".top-bar, [data-topbar]"),f=e.find("section, .section"),g=c.closest("li.moved"),h=g.parent();e.data("index",e.data("index")-1),d.rtl?(f.css({right:-(100*e.data("index"))+"%"}),f.find(">.name").css({right:100*e.data("index")+"%"})):(f.css({left:-(100*e.data("index"))+"%"}),f.find(">.name").css({left:100*e.data("index")+"%"})),0===e.data("index")?e.css("height",""):e.css("height",d.outerHeight(h,!0)+d.settings.$topbar.data("height")),setTimeout(function(){g.removeClass("moved")},300)})},breakpoint:function(){return a(c).width()<=this.settings.breakPoint||a("html").hasClass("lt-ie9")},assemble:function(){var b=this;this.settings.$section.detach(),this.settings.$section.find(".has-dropdown>a").each(function(){var c=a(this),d=c.siblings(".dropdown"),e=c.attr("href");if(b.settings.mobile_show_parent_link&&e&&e.length>1)var f=a('<li class="title back js-generated"><h5><a href="#"></a></h5></li><li><a class="parent-link js-generated" href="'+e+'">'+c.text()+"</a></li>");else var f=a('<li class="title back js-generated"><h5><a href="#"></a></h5></li>');1==b.settings.custom_back_text?f.find("h5>a").html(b.settings.back_text):f.find("h5>a").html("&laquo; "+c.html()),d.prepend(f)}),this.settings.$section.appendTo(this.settings.$topbar),this.sticky()},height:function(b){var c=0,d=this;return b.find("> li").each(function(){c+=d.outerHeight(a(this),!0)}),c},sticky:function(){var c=a(b),d=this;c.scroll(function(){d.updateStickyPositioning()})},updateStickyPositioning:function(){var c="."+this.settings.stickyClass,d=a(b);if(a(c).length>0){var e=this.settings.$topbar.data("stickyoffset");a(c).hasClass("expanded")||(d.scrollTop()>e?a(c).hasClass("fixed")||(a(c).addClass("fixed"),a("body").addClass("f-topbar-fixed")):d.scrollTop()<=e&&a(c).hasClass("fixed")&&(a(c).removeClass("fixed"),a("body").removeClass("f-topbar-fixed")))}},off:function(){a(this.scope).off(".fndtn.topbar"),a(b).off(".fndtn.topbar")},reflow:function(){}}}(Foundation.zj,this,this.document);
//# sourceMappingURL=foundation.topbar.js.map