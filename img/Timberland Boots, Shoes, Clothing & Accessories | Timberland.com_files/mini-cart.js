define(["jquery","wcs.mini-list","wcs.right-panel","wcs.top-panel","wcs.mobile-panel","wcs.context","wcs.global-events","wcs.alert","wcs.utils","wcs.hopup","promise!wcs.lang-msg","pubsub"],function(a,b,c,d,e,f,g,h,i,j){function k(b){var c=a(".global-cart-wishlist-panels-js"),d=c.find(".notification"),e=i.getScreenWidth();d.html(b).removeClass("hide"),c.removeClass("hide"),"right"===q&&c.show(),e<VIEWPORTS.BREAKPOINTS.MOBILE.MAX&&a(window).scrollTop(0)}function l(a,b,c){var d;if("add-to-cart"===a){var e=LANG_MSG["MOBILE_SHOP_CART.MSG.successfullyAdded"],f=LANG_MSG["MOBILE_SHOP_CART.MSG.successfullyAdded2"],g=LANG_MSG["MOBILE_SHOP_CART.MSG.successfullyAdded3"];d='<div class="close-btn" data-action="close"><span>X</span></div><div class="notification-text"><span>'+e+'</span><span> </span><span class="product-name">'+b+"</span><span> </span><span>"+f+'</span><span> </span><span class="shopping-cart-text">'+g+"</span></div>"}else if("add-to-wishlist"===a){var e=LANG_MSG["MOBILE_WISH_LIST.MSG.successfullyAdded"],f=LANG_MSG["MOBILE_WISH_LIST.MSG.successfullyAdded2"],g=LANG_MSG["MOBILE_WISH_LIST.MSG.successfullyAdded3"];d=(c?'<a href="'+c+'" class="notification-text">':"")+"<span>"+e+'</span><span> </span><span class="product-name">'+b+"</span><span> </span><span>"+f+'</span><span> </span><span class="shopping-cart-text">'+g+"</span>"+(c?"</a>":"")}else if("remove-wishlist"===a||"remove-shopcart"===a){var h="remove-wishlist"===a?LANG_MSG["DEFAULT_MINICART.MSG.removedFromWishlist"]:LANG_MSG["DEFAULT_MINICART.MSG.removedFromShoppingCart"];d='<div class="close-btn" data-action="close"><span>X</span></div><div class="notification-text"><span>'+h+"</span></div>"}return d}function m(b,c){var d,e=a(".global-cart-wishlist-panels-js"),f=e.find(".notification"),g=parseInt(WCS_CONFIG.get("global::miniCartAutoHideTime")),h=i.getScreenWidth(),j=h<VIEWPORTS.BREAKPOINTS.TABLET.MIN?!0:!1;j&&(d=l("add-to-cart",b),i.stopTimer(p),k(d),h<VIEWPORTS.BREAKPOINTS.MOBILE.MAX?p=i.startTimer(function(){f.addClass("hide"),"top"===q?e.addClass("hide"):e.fadeOut()},g):(e.find(".close-btn").on("click",function(){e.addClass("hide")}),p=i.startTimer(function(){f.addClass("hide")},g)))}function n(b){if("top"===q){var c="wishlist"===b?"remove-wishlist":"remove-shopcart",d=l(c),e=a(".global-cart-wishlist-panels-js"),f=e.find(".notification");i.stopTimer(p),f.html(d).removeClass("hide")}}function o(){var b=i.getScreenWidth();if(b<VIEWPORTS.BREAKPOINTS.TABLET.MIN){var c,d=a("#product-info h1").text(),e=a("#btn_wishlist").attr("href"),f=a("#wishlist-notification-panel"),g=a(".notification",f);c=l("add-to-wishlist",d,e),i.stopTimer(p),g.html(c),f.show()}}var p,q=WCS_CONFIG.get("global::miniCartLocation");parseInt(WCS_CONFIG.get("global::miniCartAutoHideTime"));!function(){0===a("body#checkout").length&&(a.pubsub("subscribe",g.SHOPCART_UPDATED,function(b,c){var f=a(".add-to-bag-js").parents(".product-form-js").find(".attr-box.selected img").attr("data-product-name"),g=i.getScreenWidth();if("undefined"==typeof f&&a(".custom-order-item-form-js").length>0&&(f=a(".custom-order-item-form-js").data("product-name"),""===f&&a(".breadcrumb-product-name").length>0&&(f=a(".breadcrumb-product-name").text())),g<VIEWPORTS.BREAKPOINTS.TABLET.MIN){if(!e.shopcartUpdateCheck)return}else if("delete"===c)return n("shopcart"),void("top"===q&&d.shopcartUpdateAction(b,c));"top"===q&&d.shopcartUpdateAction(b,c),m(f,"SHOP_CART")}),a.pubsub("subscribe",g.WISHLIST_UPDATED,function(a,b){"delete"===b?n("wishlist"):o()}),a.pubsub("subscribe",g.MINICART_CONTENT_RENDER_COMPLETE,function(a,b){"top"===q&&d.shopcartContentRenderComplete(a,b)}))}(),a(function(){if(a(window).width()<VIEWPORTS.BREAKPOINTS.MOBILE.MAX)e.init();else if("top"===q&&0===a("body#checkout").length)d.init(b.initMiniListActions);else{if("top"===q&&0!==a("body#checkout").length)return d.cartBtnCustomStyle(),!1;c.init(b.initMiniListActions)}a("body").on({click:function(c){var d,e,g;if($target=a(c.target),"right"===q&&$target.hasClass("cart-js")&&$target.hasClass("active-js")||$target.parents().hasClass("cart-js")&&$target.parents().hasClass("active-js"))d=ACTION_URLS.MINI_SHOPPING_URL,e={storeId:f.getStoreId(),langId:f.getLangId(),catalogId:f.getCatalogId()},g={title:LANG_MSG["DEAFULT_MINICART.SHOPPING.title"],page:"shopcart",container:a(".global-cart-wishlist-panels-js .shopcart.cart-list")},b.renderMiniListItems(d,e,g);else if($target.hasClass("wishlist-js")&&$target.hasClass("active-js")||$target.parents().hasClass("wishlist-js")&&$target.parents().hasClass("active-js"))d=ACTION_URLS.MINI_WISHLIST_URL,e={storeId:f.getStoreId(),langId:f.getLangId()},g={title:LANG_MSG["DEAFULT_MINICART.WISHLIST.title"],page:"wishlist",container:a(".global-cart-wishlist-panels-js .wishlist.cart-list")},b.renderMiniListItems(d,e,g);else if($target.parents(".remove-item-js").length>0){var h=$target.parents(".cart-item-js").find(".cart-item-row"),i="";h.find(".item-attr-js").each(function(){i+=(i.length>0?" / ":"")+a(this).text()});var k={currency:a(".global-cart-wishlist-panels-js").data("currency"),productName:h.find(".item-name-js").text().replace(/^\s+|\s+$/gm,""),productId:h.find(".product-info-js").data("part-number"),unitPrice:h.find(".item-price-js").data("unit-price"),definingAttributes:a.trim(i),quantity:h.find(".item-qty-js").data("qty"),isProductRemoval:!0};zm.trackRemovedItem(k)}else if($target.hasClass("share-cart-js")){var d=$target.data("modal-url"),l=$target.data("modal-width");a("#global-cart-wishlist-panels .graphic-icon-close-btn-alt").click(),j.openDynamicModal(d,l)}}})})});
//# sourceMappingURL=mini-cart.js.map