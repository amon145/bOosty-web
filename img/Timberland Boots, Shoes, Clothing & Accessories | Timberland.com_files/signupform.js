define(["jquery","pubsub","foundation.abide","foundation.alerts","foundation.placeholder"],function(a,b,c,d,e){!function(a,b,c,d){var e="signupForm",f=function(b,c){this.element=b,this.messageDisplay=a(this.element).find(".signup-message.hide"),this.options=c,this.metadata=a(this.element).data("signupform-options")};f.prototype={defaults:{successMessage:"Thank you for signing up.",errorMessage:"There was a problem. Please try again later."},init:function(){console.log("initilizing form for",a(this.element)),this.config=a.extend({},this.defaults,this.options,this.metadata),this._build();var b=this;return a(c).foundation("abide alerts"),a(b.element).submit(function(c){c.preventDefault();var e=a(b.element).find("[data-invalid]");return e.length>0?(console.log("invalid fields",e),!1):void a.ajax({url:a(this).attr("action"),type:a(this).attr("method"),data:a(this).serialize(),processData:!0,cache:!1,success:function(a){console.log("form response",a),a.errorMessage!==d?(b.showResult(a.errorMessage,"alert"),b.publishSignupResult(!1)):(b.showResult(b.config.successMessage,"success"),b.publishSignupResult(!0))},error:function(a){console.log("form error",a),b.showResult(b.config.errorMessage,"alert"),b.publishSignupResult(!1)}})}),b},_build:function(){},showResult:function(b,c){console.log("form results",b);var d=this;a(d.messageDisplay).addClass("hide"),a(d.messageDisplay).find(".alert-box").remove(),a(d.messageDisplay).append("<div data-alert class='alert-box "+c+"'><span>"+b+"</span><a class='close'>&times;</a>"),a(d.messageDisplay).removeClass("hide")},publishSignupResult:function(b){a.pubsub("publish","vfdp.aem.footer.emailsignup",b)}},f.defaults=f.prototype.defaults,a.fn.signupForm=function(b){return this.each(function(){var c=a(this).data(e);c||(c=new f(this,b).init(),a(this).data(e,c))})}}(jQuery,window,document)});
//# sourceMappingURL=signupform.js.map