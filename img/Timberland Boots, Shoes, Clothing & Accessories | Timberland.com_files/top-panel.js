define(["jquery","wcs.mini-list","wcs.context","wcs.global-events","wcs.utils","promise!wcs.lang-msg"],function(a,b,c,d,e){function f(b){o(),u(),a(window).on("resize",function(){o()}),a("body").delegate("#master-container, #modal","click touchstart",function(b){$target=a(b.target),$target.parents(".global-cart-wishlist-panels-js").length>=1||$target.children(".nav-shoppingbag-qty-js")&&$target.hasClass("cart-js")&&$target.hasClass("unav-shoppingbag-js")&&$target.parents(".unav-shoppingbag-js")&&$target.hasClass("global-cart-wishlist-panels-js")||a(".cart-js").hasClass("active-js")&&r()}).delegate(".lower-container-js .has-dropdown-js","hover",function(a){i.hasClass("active-js")&&r()}),i.on("mouseenter",function(a){var b=parseInt(i.find(".nav-shoppingbag-qty-js").text());e.getScreenWidth()>VIEWPORTS.BREAKPOINTS.DESKTOP.MIN&&b>0?(a.preventDefault(),k=!1,n()):"touch"===j&&(window.location.href=i.find(".btn-shoppingbag-js").attr("href"))}),a(".global-cart-wishlist-panels-top-js, .unav-shoppingbag-js ").on({touchstart:function(a){k&&!a.target.hasClass(".unav-shoppingbag-js")&&e.stopTimer(g)},touchstop:function(a){k&&!a.target.hasClass(".unav-shoppingbag-js")&&(g=e.startTimer(r,m))},mouseenter:function(a){k&&e.stopTimer(g)},mouseleave:function(a){k&&(g=e.startTimer(r,m))}}),b&&b()}var g,h=a(".global-cart-wishlist-panels-top-js"),i=a(".unav-shoppingbag-js"),j=this.touchType=window.navigator.pointerEnabled?"pointer":"ontouchstart"in window?"touch":"mouse",k=!1,l=!1,m=parseInt(WCS_CONFIG.get("global::miniCartAutoHideTime")),n=function(){k?(k=!1,r()):(l=!1,k=!0,q(),p(l),g=e.startTimer(r,m))},o=function(){var b=(a(window).width()-a(".master-header").innerWidth())/2;h.css({opacity:0,right:b+10,top:i.outerHeight()-2,minHeight:400})},p=function(d,e,f,g){e=e||!1;var h=ACTION_URLS.MINI_SHOPPING_URL,i={storeId:c.getStoreId(),langId:c.getLangId(),catalogId:c.getCatalogId()},j={title:LANG_MSG["DEAFULT_MINICART.SHOPPING.title"],page:"shopcart",container:a(".global-cart-wishlist-panels-js .shopcart.cart-list"),autoHide:d,isInit:e};0===a(".cart-item-slide-js").find(".cart-item-js").length||"SHOPCART_UPDATED"===g?b.renderMiniListItems(h,i,j,f):b.initCarousel(j)},q=function(){k=!0,e.stopTimer(g),u(),i.addClass("active active-js").siblings().not(".active-js").addClass("inactive inactive-js"),h.removeClass("hide").fadeTo(250,1,function(){h.find(".cart-js").addClass("active-js")})},r=function(){k=!1,e.stopTimer(g),i.removeClass("active active-js").siblings().removeClass("inactive inactive-js"),h.find(".cart-js").removeClass("active-js"),h.fadeTo(250,0,function(){h.addClass("hide").css("display","").find(".notification").addClass("hide")})},s=function(a,b){var c="delete"===b?!1:!0,d=e.getScreenWidth()>VIEWPORTS.BREAKPOINTS.MOBILE.MAX;d&&p(c,!1,b,"SHOPCART_UPDATED")},t=function(b,c){"delete"===c?e.stopTimer(g):"delete"!==c&&"init"!==c&&(q(),g=e.startTimer(r,m),a(window).scrollTop(0))},u=function(){isNotEmpty=parseInt(i.find(".nav-shoppingbag-qty-js").text())>0?!0:!1,isNotEmpty?i.addClass("shopcart-style"):i.removeClass("shopcart-style")};return{init:f,shopcartUpdateAction:s,shopcartContentRenderComplete:t,cartBtnCustomStyle:u}});
//# sourceMappingURL=top-panel.js.map